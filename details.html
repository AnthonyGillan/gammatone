<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>About the Gammatone Filterbank Toolkit &mdash; Gammatone Filterbank Toolkit 1.0</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Gammatone Filterbank Toolkit 1.0" href="index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Gammatone Filterbank Toolkit 1.0</span></a></h1>
        <h2 class="heading"><span>About the Gammatone Filterbank Toolkit</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="about-the-gammatone-filterbank-toolkit">
<h1>About the Gammatone Filterbank Toolkit<a class="headerlink" href="#about-the-gammatone-filterbank-toolkit" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This is a port of Malcolm Slaney&#8217;s and Dan Ellis&#8217; gammatone filterbank
MATLAB code, detailed below, to Python 3 using Numpy and Scipy. It
analyses signals by running them through banks of gammatone filters,
similar to Fourier-based spectrogram analysis.</p>
<div class="figure align-center">
<img alt="Gammatone-based spectrogram of Für Elise" src="_images/FurElise.png" />
<p class="caption">Gammatone-based spectrogram of Für Elise</p>
</div>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>numpy</li>
<li>scipy</li>
<li>nose</li>
<li>mock</li>
<li>matplotlib</li>
<li>scikits.audiolab &gt;= 0.11.0.p3.1</li>
</ul>
<p>Because the authoritative version of <tt class="docutils literal"><span class="pre">audiolab</span></tt> hasn&#8217;t been ported to
Python 3 yet, you will need to install <a class="reference external" href="https://github.com/detly/audiolab">my
port</a>.</p>
</div>
<div class="section" id="using-the-code">
<h2>Using the Code<a class="headerlink" href="#using-the-code" title="Permalink to this headline">¶</a></h2>
<p>For a demonstration, you can run:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m gammatone samples/FurElise.ogg -d 10
</pre></div>
</div>
<p>...to see a gammatone-gram of the first ten seconds of Beethoven&#8217;s &#8220;Für
Elise.&#8221; If you&#8217;ve installed via
<tt class="docutils literal"><span class="pre">pip</span></tt> or <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">install</span></tt>, you should also be able to just run:</p>
<div class="highlight-python"><div class="highlight"><pre>gammatone samples/FurElise.ogg -d 10
</pre></div>
</div>
</div>
<div class="section" id="basis">
<h2>Basis<a class="headerlink" href="#basis" title="Permalink to this headline">¶</a></h2>
<p>This project is based on research into how humans perceive audio,
originally published by Malcolm Slaney:</p>
<p><a class="reference external" href="http://cobweb.ecn.purdue.edu/~malcolm/interval/1998-010/">Malcolm Slaney (1998) &#8220;Auditory Toolbox Version 2&#8221;, Technical Report
#1998-010, Interval Research Corporation,
1998.</a></p>
<p>Slaney&#8217;s report describes a way of modelling how the human ear
perceives, emphasises and separates different frequencies of sound. A
series of gammatone filters are constructed whose width increases with
increasing centre frequency, and this bank of filters is applied to a
time-domain signal. The result of this is a spectrum that should
represent the human experience of sound better than, say, a
Fourier-domain spectrum would.</p>
<p>A gammatone filter has an impulse response that is a sine wave
multiplied by a gamma distribution function. It is a common approach to
modelling the auditory system.</p>
<p>The gammatone filterbank approach can be considered analogous (but not
equivalent) to a discrete Fourier transform where the frequency axis is
logarithmic. For example, a series of notes spaced an octave apart would
appear to be roughly linearly spaced; or a sound that was distributed
across the same linear frequency range would appear to have more spread
at lower frequencies.</p>
<p>The real goal of this toolkit is to allow easy computation of the
gammatone equivalent of a spectrogram — a time-varying spectrum of
energy over audible frequencies based on a gammatone filterbank.</p>
<p>Slaney demonstrated his research with an initial implementation in
MATLAB. This implementation was later extended by Dan Ellis, who found a
way to approximate a &#8220;gammatone-gram&#8221; by using the fast Fourier
transform. Ellis&#8217; code calculates a matrix of weights that can be
applied to the output of a FFT so that a Fourier-based spectrogram can
easily be transformed into such an approximation.</p>
<p>Ellis&#8217; code and documentation is here: <a class="reference external" href="http://labrosa.ee.columbia.edu/matlab/gammatonegram/">Gammatone-like
spectrograms</a></p>
</div>
<div class="section" id="interest">
<h2>Interest<a class="headerlink" href="#interest" title="Permalink to this headline">¶</a></h2>
<p>I became interested in this because of my background in science
communication and my general interest in the teaching of signal
processing. I find that the spectrogram approach to visualising signals
is adequate for illustrating abstract systems or the mathematical
properties of transforms, but bears little correspondence to a person&#8217;s
own experience of sound. If someone wants to see what their favourite
piece of music &#8220;looks like,&#8221; a normal Fourier transform based
spectrogram is actually quite a poor way to visualise it. Features of
the audio seem to be oddly spaced or unnaturally emphasised or
de-emphasised depending on where they are in the frequency domain.</p>
<p>The gammatone filterbank approach seems to be closer to what someone
might intuitively expect a visualisation of sound to look like, and can
help develop an intuition about alternative representations of signals.</p>
</div>
<div class="section" id="verifying-the-port">
<h2>Verifying the port<a class="headerlink" href="#verifying-the-port" title="Permalink to this headline">¶</a></h2>
<p>Since this is a port of existing MATLAB code, I&#8217;ve written tests to
verify the Python implementation against the original code. These tests
aren&#8217;t unit tests, but they do generally test single functions. Running
the tests has the same workflow:</p>
<ol class="arabic simple">
<li>Run the scripts in the <tt class="docutils literal"><span class="pre">test_generation</span></tt> directory. This will
create a <tt class="docutils literal"><span class="pre">.mat</span></tt> file containing test data in <tt class="docutils literal"><span class="pre">tests/data</span></tt>.</li>
<li>Run <tt class="docutils literal"><span class="pre">nosetest3</span></tt> in the top level directory. This will find and run
all the tests in the <tt class="docutils literal"><span class="pre">tests</span></tt> directory.</li>
</ol>
<p>Although I&#8217;m usually loathe to check in generated files to version
control, I&#8217;m willing to make an exception for the <tt class="docutils literal"><span class="pre">.mat</span></tt> files
containing the test data. My reasoning is that they represent the
decoupling of my code from the MATLAB code, and if the two projects were
separated, they would be considered a part of the Python code, not the
original MATLAB code.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2014, Jason Heeris.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>